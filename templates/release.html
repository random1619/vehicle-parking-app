{% extends "base.html" %}

{% block title %}Release Parking - Parking App{% endblock %}

{% block nav %}
{% include "partials/user_topbar.html" %}
{% endblock %}

{% block content %}
<div class="page-shell">
  <div class="content-wrap" style="max-width: 760px;">
    <a href="{{ url_for('dashboard.user_dashboard') }}" class="back-link">Back to Dashboard</a>

    <header class="page-header">
      <p class="breadcrumb">User / Release</p>
      <h1 class="page-title">Release Parking</h1>
      <p class="page-subtitle">Review your session details before confirming release.</p>
    </header>

    <section class="card" style="margin-bottom: 16px;">
      <div class="simple-grid two" style="margin-bottom: 12px;">
        <div class="card-muted"><div class="notice">Vehicle Number</div><div style="font-weight: 600;">{{ booking.vehicle_no }}</div></div>
        <div class="card-muted"><div class="notice">Spot Number</div><div style="font-weight: 600;">{{ spot.spot_number }}</div></div>
        <div class="card-muted"><div class="notice">Location</div><div style="font-weight: 600;">{{ spot.lot.location_name }}</div></div>
        <div class="card-muted"><div class="notice">Duration</div><div style="font-weight: 600;">{{ duration_hours }} hour{{ 's' if duration_hours != 1 else '' }}</div></div>
        <div class="card-muted"><div class="notice">Check-in Time</div><div style="font-weight: 600;">{{ booking.timestamp.strftime('%H:%M, %d %b') }}</div></div>
        <div class="card-muted"><div class="notice">Release Time</div><div style="font-weight: 600;">{{ release_time.strftime('%H:%M, %d %b') }}</div></div>
      </div>

      <div class="card-muted" style="margin-bottom: 14px; text-align: center;">
        <div class="notice" style="margin-bottom: 4px;">Total Amount Due</div>
        <div class="stat-value" style="font-size: 2rem;">{{ total_cost }}</div>
        <div class="notice">{{ duration_hours }} hours x {{ spot.lot.price }}/hour</div>
      </div>

      <div class="alert alert-warning" style="margin-bottom: 0;">
        This action cannot be undone once the spot is released.
      </div>
    </section>

    <form method="POST" style="max-width: 360px;">
      <div class="form-actions">
        <a href="{{ url_for('dashboard.user_dashboard') }}" class="btn btn-secondary">Cancel</a>
        <button type="submit" class="btn btn-danger">Confirm Release</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}

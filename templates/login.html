<!DOCTYPE html>
<html lang="en">

<head>
  <title>Login HTML</title>
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    .bg-image {
      background-image: url('../static/car.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      position: relative;
    }

    .login-box {
      position: absolute;
      top: 20%;
      left: 5%;
      background-color: rgba(255, 255, 255, 0.05);
      border: 2px solid white;
      border-radius: 10px;
      padding: 40px;
      width: 450px;
      color: white;
    }

    .form-control::placeholder {
      color: #ccc;
    }

    a.forgot-link {
      color: #ccc;
      font-size: 0.9rem;
    }

    a.forgot-link:hover {
      text-decoration: underline;
      color: white;
    }

    .fade-out {
      transition: opacity 0.5s ease-out;
    }

    .fade-out.hide {
      opacity: 0;
    }
  </style>
</head>

<body>
  <div class="bg-image">
    <div class="login-box">
      <h2 class="mb-4 text-uppercase text-center" style="color: rgb(183, 170, 240);">Login</h2>
      <form method="POST" action="{{ url_for('auth.login') }}">

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show auto-dismiss fade-out" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
        <div class="mb-3">
          <label for="email" class="form-label">Email address</label>
          <input type="email" name="email" class="form-control bg-dark text-white" id="email" placeholder="Enter email">
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input type="password" name="password" class="form-control bg-dark text-white" id="password"
            placeholder="Password">
          <div class="mt-2">
            <a href="#" class="forgot-link">Forgot Password?</a>
          </div>
        </div>
        <button type="submit" class="btn btn-outline-light w-100 mt-3">Login</button>
        <div class="text-center mt-3">
          <a href="{{ url_for('auth.register')}}" class="signup-link">Create account</a>
        </div>
      </form>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Auto-dismiss flash messages after 3 seconds
    setTimeout(function () {
      const alerts = document.querySelectorAll('.alert.auto-dismiss.fade-out');
      alerts.forEach(function (alert) {
        alert.classList.add('hide');
        setTimeout(() => alert.remove(), 500); // wait for transition
      });
    }, 3000);
  </script>

</body>

</html>
{% extends "base.html" %}

{% block title %}Notifications - Parking App{% endblock %}

{% block nav %}
{% include "partials/user_topbar.html" %}
{% endblock %}

{% block content %}
<div class="page-shell">
  <div class="content-wrap" style="max-width: 980px;">
    <a href="{{ url_for('dashboard.user_dashboard') }}" class="back-link">Back to Dashboard</a>

    <header class="page-header">
      <p class="breadcrumb">User / Notifications</p>
      <h1 class="page-title">Notification Center</h1>
      <p class="page-subtitle">Booking confirmations, waitlist updates, and reminders.</p>
    </header>

    <section class="card">
      {% if notifications %}
      <div class="table-toolbar">
        <h2 class="section-title">Notifications</h2>
        <button class="btn btn-secondary btn-sm js-density-toggle" data-target="#notificationTableWrap">Compact Rows</button>
      </div>
      <div class="table-wrap" id="notificationTableWrap">
        <table class="ops-table">
          <thead>
            <tr>
              <th>Type</th>
              <th>Channel</th>
              <th>Status</th>
              <th>Subject</th>
              <th>Message</th>
              <th>Created</th>
            </tr>
          </thead>
          <tbody>
            {% for item in notifications %}
            <tr>
              <td>{{ item.notification_type }}</td>
              <td>{{ item.channel }}</td>
              <td><span class="badge {% if item.status == 'sent' %}badge-success{% else %}badge-neutral{% endif %}">{{ item.status }}</span></td>
              <td>{{ item.subject or '-' }}</td>
              <td>{{ item.message }}</td>
              <td>{{ item.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="empty-state">
        <h2>No notifications</h2>
        <p>You will see event alerts and delivery status here.</p>
      </div>
      {% endif %}
    </section>
  </div>
</div>
{% endblock %}
